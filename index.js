var p=Object.defineProperty;var S=(t,i,s)=>i in t?p(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s;var m=(t,i,s)=>(S(t,typeof i!="symbol"?i+"":i,s),s);import{j as e,r as g,R as x,c as j}from"./assets/vendor-s-jGDLLM.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const l="/tic-tac-toe/assets/sprite-FCKagW43.svg";function b(t){return e.jsxs("div",{className:"menu-container",children:[e.jsx(N,{}),e.jsx(k,{onChange:i=>{t.onChange(i)}}),e.jsx(y,{onClick:i=>{t.onClick(i)}})]})}function N(){return e.jsx("div",{className:"logo-container",children:e.jsx("svg",{width:"72",height:"32",children:e.jsx("use",{href:`${l}#logo`})})})}function k(t){const[i,s]=g.useState(!0);return e.jsxs("div",{className:"mark-selector__container",children:[e.jsx("h2",{className:"mark-selector__title",children:"pick players 1's mark"}),e.jsx("input",{type:"checkbox",className:"mark-selector__checkbox visually-hidden",id:"mark-selector",checked:!i,onChange:()=>{t.onChange(!i),s(!i)}}),e.jsxs("label",{className:"mark-selector__label",htmlFor:"mark-selector",children:[e.jsx("div",{className:"mark-selector__selected-div"}),e.jsx("svg",{className:"mark-selector__x-icon",width:"32",height:"32",children:e.jsx("use",{href:`${l}#icon-x`})}),e.jsx("svg",{className:"mark-selector__o-icon",width:"32",height:"32",children:e.jsx("use",{href:`${l}#icon-o`})})]}),e.jsx("p",{className:"mark-selector__notice",children:"remember: x goes firt"})]})}function y(t){return e.jsxs("div",{className:"enemy-selector__container",children:[e.jsx("button",{className:"enemy-selector__cpu-btn",type:"button",onClick:()=>t.onClick(!1),children:"new game (vs cpu)"}),e.jsx("button",{className:"enemy-selector__multiplayer-btn",type:"button",onClick:()=>t.onClick(!0),children:"new game (vs player)"})]})}function v(t){return e.jsxs("div",{className:"board__header",children:[e.jsx("svg",{width:"72",height:"32",children:e.jsx("use",{href:`${l}#logo`})}),e.jsxs("div",{className:"header__turn-container",children:[e.jsx(C,{isXStep:t.isXStep}),e.jsx("p",{className:"header__turn-para",children:"turn"})]}),e.jsx("button",{className:"header__reset-btn",type:"button",onClick:t.onClick,children:e.jsx("svg",{className:"header-reset-icon",width:"20",height:"20",children:e.jsx("use",{href:`${l}#icon-restart`})})})]})}function C(t){return t.isXStep?e.jsx("svg",{className:"header__x-icon",width:"20",height:"20",children:e.jsx("use",{href:`${l}#icon-x`})}):e.jsx("svg",{className:"header__o-icon",width:"20",height:"20",children:e.jsx("use",{href:`${l}#icon-o`})})}function X(t){let i,s;return t.isMultiplayer?t.isXSelected?(i="p1",s="p2"):(i="p2",s="p1"):(t.isXSelected,i="you",s="cpu"),e.jsxs("div",{className:"score-board__content-container",children:[e.jsxs("div",{className:"score-board__x-score-container score-board__score-container",children:[e.jsxs("h3",{className:"score-board__title",children:["x (",i,")"]}),e.jsx("p",{className:"score-board__scores",children:t.scores.xScore})]}),e.jsxs("div",{className:"score-board__ties-container score-board__score-container",children:[e.jsx("h3",{className:"score-board__title",children:"ties"}),e.jsx("p",{className:"score-board__scores",children:t.scores.ties})]}),e.jsxs("div",{className:"score-board__o-score-container score-board__score-container",children:[e.jsxs("h3",{className:"score-board__title",children:["o (",s,")"]}),e.jsx("p",{className:"score-board__scores",children:t.scores.oScore})]})]})}function w(t,i,s){const r=t.slice(),a=i?"x":"o",n=i?"o":"x",h=!i&&s?!0:!!(i&&!s),_=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];if(h){if(r.every(u=>u===null)){const u=Math.floor(Math.random()*10);return u>8?8:u}for(let u of _){const[c,o,d]=u;if(r[c]===n&&r[o]===n&&r[d]===null)return d;if(r[c]===n&&r[d]===n&&r[o]===null)return o;if(r[o]===n&&r[d]===n&&r[c]===null)return c}for(let u of _){const[c,o,d]=u;if(r[c]===a&&r[o]===a&&r[d]===null)return d;if(r[c]===a&&r[d]===a&&r[o]===null)return o;if(r[o]===a&&r[d]===a&&r[c]===null)return c}return r[4]?r.indexOf(null):4}}class q extends x.Component{constructor(s){super(s);m(this,"state");m(this,"iconX");m(this,"iconO");this.iconX=e.jsx("svg",{className:"board__x-icon",width:"64",height:"64",children:e.jsx("use",{href:`${l}#icon-x`})}),this.iconO=e.jsx("svg",{className:"board__o-icon",width:"64",height:"64",children:e.jsx("use",{href:`${l}#icon-o`})});const r=JSON.parse(localStorage.getItem("marks"))?JSON.parse(localStorage.getItem("marks")).map(a=>a==="x"?this.iconX:a==="o"?this.iconO:null):null;this.state=localStorage.getItem("board")?JSON.parse(localStorage.getItem("board")):{field:{squares:r,marks:JSON.parse(localStorage.getItem("marks"))||Array(9).fill(null)},scores:JSON.parse(localStorage.getItem("scores"))||{xScore:0,oScore:0,ties:0},isXStep:JSON.parse(localStorage.getItem("isXStep"))||!0,isXGoesFirst:JSON.parse(localStorage.getItem("isXGoesFirst"))||!0,isRestart:!1}}handleFieldClick(s){if(s||s===0){const{squares:r,marks:a}=this.state.field;if(r[s]||f(this.state.field.marks))return;this.state.isXStep?(r[s]=this.iconX,a[s]="x"):(r[s]=this.iconO,a[s]="o"),this.setState({field:{squares:r,marks:a},isXStep:!this.state.isXStep})}}restartClickHandler(){this.setState({isRestart:!0})}nextRoundHandler(){const s=f(this.state.field.marks);let{xScore:r,oScore:a,ties:n}=this.state.scores;s&&(s==="tie"?n+=1:s[0]==="x"?r+=1:s[0]==="o"&&(a+=1)),this.setState({field:{squares:Array(9).fill(null),marks:Array(9).fill(null)},isXStep:!this.state.isXGoesFirst,isXGoesFirst:!this.state.isXGoesFirst,scores:{xScore:r,oScore:a,ties:n}})}restartGame(){this.setState({field:{squares:Array(9).fill(null),marks:Array(9).fill(null)},scores:{xScore:0,oScore:0,ties:0},isXStep:!0,isRestart:!1}),this.props.resetGame()}onRoundEnd(s){if(s){let r=null,a=null;return s==="tie"?r=e.jsx("h2",{className:"result__title_tie",children:"round tied"}):s[0]==="x"?(r=e.jsxs("h2",{className:"result__title_x-win",children:[this.iconX," takes the round"]}),a=e.jsx("p",{className:"result__winner-para",children:"player 1 wins!"})):s[0]==="o"&&(r=e.jsxs("h2",{className:"result__title_o-win",children:[this.iconO,"takes the round"]}),a=e.jsx("p",{className:"result__winner-para",children:"player 2 wins!"})),e.jsx("div",{className:"board__result-backdrop",children:e.jsxs("div",{className:"result__container",children:[a,r,e.jsxs("div",{className:"result__btns-wrapper",children:[e.jsx("button",{className:"result__quit-btn",type:"button",onClick:()=>this.restartClickHandler(),children:"quit"}),e.jsx("button",{className:"result__next-btn",type:"button",onClick:()=>this.nextRoundHandler(),children:"next round"})]})]})})}return null}render(){localStorage.setItem("marks",JSON.stringify(this.state.field.marks)),localStorage.setItem("scores",JSON.stringify(this.state.scores)),localStorage.setItem("isXStep",JSON.stringify(this.state.isXStep));const s=f(this.state.field.marks)?this.onRoundEnd(f(this.state.field.marks)):null,r=this.state.isRestart?e.jsx("div",{className:"board__restart-backdrop",children:e.jsxs("div",{className:"restart__container",children:[e.jsx("h2",{className:"restart__title",children:"restart game?"}),e.jsxs("div",{className:"restart__btns-wrapper",children:[e.jsx("button",{className:"restart__no-btn",type:"button",onClick:()=>{this.setState({isRestart:!1})},children:"no, cancel"}),e.jsx("button",{className:"restart__yes-btn",type:"button",onClick:()=>{this.restartGame()},children:"yes, restart"})]})]})}):null;return this.props.isMultiplayer||this.handleFieldClick(w(this.state.field.marks,this.props.isXSelected,this.state.isXStep)),e.jsxs("div",{className:"board-container",children:[e.jsx(v,{isXStep:this.state.isXStep,onClick:()=>this.restartClickHandler()}),e.jsx(O,{squares:this.state.field.squares,marks:this.state.field.marks,onClick:a=>this.handleFieldClick(a),isXStep:this.state.isXStep}),e.jsx(X,{isMultiplayer:this.props.isMultiplayer,isXSelected:this.props.isXSelected,scores:this.state.scores}),s,r]})}}class O extends x.Component{constructor(i){super(i)}renderSquare(i){return e.jsx(M,{value:this.props.squares[i],marks:this.props.marks,id:i,onClick:()=>this.props.onClick(i),isXStep:this.props.isXStep})}render(){return e.jsxs("div",{className:"board__game-field",children:[this.renderSquare(0),this.renderSquare(1),this.renderSquare(2),this.renderSquare(3),this.renderSquare(4),this.renderSquare(5),this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)]})}}function M(t){let i=null;const s=f(t.marks);if(t.value||(t.isXStep?i=e.jsx("svg",{className:"board__icon-outline",width:"64",height:"64",children:e.jsx("use",{href:`${l}#icon-x-outline`})}):i=e.jsx("svg",{className:"board__icon-outline",width:"64",height:"64",children:e.jsx("use",{href:`${l}#icon-o-outline`})})),s&&s!=="tie"&&(s[1]===t.id||s[2]===t.id||s[3]===t.id)){const r=s[0]==="x"?"board__square-btn_x-win":"board__square-btn_o-win";return e.jsxs("button",{className:`board__square-btn ${r}`,children:[t.value,i]})}return e.jsxs("button",{className:"board__square-btn",onClick:t.onClick,children:[t.value,i]})}function f(t){const i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const s of i){const[r,a,n]=s;if(t[r]&&t[r]===t[a]&&t[r]===t[n])return[t[r],r,a,n]}return t.every(s=>s)?"tie":null}class I extends x.Component{constructor(s){super(s);m(this,"state");this.state=localStorage.getItem("game")?JSON.parse(localStorage.getItem("game")):{isXSelected:!0,isMultiplayer:null}}handleEnemySelect(s){this.setState({isMultiplayer:s})}handleMarkChange(s){this.setState({isXSelected:s})}handleReset(){this.setState({isXSelected:!0,isMultiplayer:null}),localStorage.clear()}render(){return localStorage.setItem("game",JSON.stringify(this.state)),this.state.isMultiplayer===null?e.jsx(b,{onChange:s=>{this.handleMarkChange(s)},onClick:s=>{this.handleEnemySelect(s)}}):e.jsx(q,{resetGame:()=>{this.handleReset()},isMultiplayer:this.state.isMultiplayer,isXSelected:this.state.isXSelected})}}const R=j.createRoot(document.querySelector(".game"));R.render(e.jsx(I,{}));
//# sourceMappingURL=index.js.map
